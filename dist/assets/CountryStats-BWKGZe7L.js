import{r,j as e}from"./react-PleRxLNr.js";import{u as R,s as C}from"./index-ByeexPDm.js";import{G as F,q as T,R as A,a as E,v as L,W as k,Y as U,m as B}from"./lucide-DAQsc5bm.js";import"./router-CwZiKTye.js";const D=()=>{var b,p,u,j,N,f;const{user:v}=R(),[t,w]=r.useState(null),[s,S]=r.useState(null),[c,n]=r.useState(!0),[x,o]=r.useState(null),[a,m]=r.useState(""),[h,g]=r.useState(!1),d=async(i=!1)=>{i?g(!0):n(!0),o(null);try{const l={};a&&(l.date=a);const y=await C.getStatsByCountry(l);w(y.usa),S(y.bf)}catch(l){console.error("Error fetching country stats:",l),o(l.message||"Erreur lors du chargement des statistiques")}finally{n(!1),g(!1)}};return r.useEffect(()=>{d()},[a]),v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(F,{className:"w-7 h-7 text-emerald-600"}),"Statistiques par Pays"]}),e.jsx("p",{className:"text-gray-600",children:"Vue s√©par√©e USA et Burkina Faso"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:a,onChange:i=>m(i.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Toutes les dates"}),a&&e.jsx("button",{onClick:()=>m(""),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Afficher toutes les dates",children:"Effacer"})]}),e.jsx("button",{onClick:()=>d(!0),disabled:h,className:"p-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors",title:"Rafra√Æchir",children:e.jsx(A,{className:`w-5 h-5 ${h?"animate-spin":""}`})})]})]}),c?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 flex flex-col items-center justify-center",children:[e.jsx(E,{className:"w-8 h-8 text-emerald-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Chargement des statistiques..."})]}):x?e.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-100 p-6 text-center",children:[e.jsx(L,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-700",children:x}),e.jsx("button",{onClick:()=>d(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"R√©essayer"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200 shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"üá∫üá∏"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"√âtats-Unis"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Agents exp√©diteurs"})]})]}),e.jsx(k,{className:"w-6 h-6 text-blue-600"})]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Transferts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.transfers})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total envoy√©"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",((b=t.totalSent)==null?void 0:b.toLocaleString())||"0"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Frais totaux"}),e.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["$",((p=t.totalFees)==null?void 0:p.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"En attente"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:t.pending})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Pay√©s"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:t.paid})]}),t.transfers>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Taux de r√©ussite"}),e.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[Math.round(t.paid/t.transfers*100),"%"]})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl border-2 border-emerald-200 shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"üáßüá´"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Burkina Faso"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Agents payeurs"})]})]}),e.jsx(U,{className:"w-6 h-6 text-emerald-600"})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-emerald-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Transferts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.transfers})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-emerald-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total re√ßu"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:[((u=s.totalReceived)==null?void 0:u.toLocaleString())||"0"," XOF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-emerald-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"En attente"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:s.pending})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-emerald-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Pay√©s"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:s.paid})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-emerald-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Taux de paiement"}),s.transfers>0&&e.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:[Math.round(s.paid/s.transfers*100),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Volume moyen"}),s.paid>0&&s.totalReceived&&e.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[Math.round(s.totalReceived/s.paid/1e3),"k XOF"]})]})]})})]})]})]}),t&&s&&!c&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-emerald-600"}),"R√©sum√© Comparatif"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total envoy√© (USA)"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["$",((j=t.totalSent)==null?void 0:j.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total re√ßu (BF)"}),e.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[((N=s.totalReceived)==null?void 0:N.toLocaleString())||"0"," XOF"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Frais totaux"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["$",((f=t.totalFees)==null?void 0:f.toLocaleString())||"0"]})]})]})]})]}):null};export{D as CountryStats};
