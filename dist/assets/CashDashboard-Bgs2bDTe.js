import{r as a,j as e}from"./react-PleRxLNr.js";import{u as R,d as S}from"./index-ByeexPDm.js";import{j as D,X as k,D as F,Z as T,_ as C,a as B,R as O,m as A,Q as L,$ as P,F as q,a0 as I,a1 as X,a2 as $,g as M}from"./lucide-DAQsc5bm.js";import"./router-CwZiKTye.js";const z=({isOpen:n,onClose:t,accountName:g,currency:r,onSuccess:h,onSubmit:y,title:x,buttonLabel:o})=>{const[b,u]=a.useState(""),[f,i]=a.useState(""),[m,p]=a.useState(null),[d,w]=a.useState(!1),[j,N]=a.useState(null),v=a.useRef(null);if(!n)return null;const l=async s=>{if(s.preventDefault(),N(null),!b||parseFloat(b)<=0){N("Le montant doit être positif");return}if(!f.trim()){N("La description est requise");return}if(!m){N("La preuve (photo ou PDF) est obligatoire pour enregistrer une entrée d'argent");return}w(!0);try{await y(g,parseFloat(b),f.trim(),m),u(""),i(""),p(null),v.current&&(v.current.value=""),h(),t()}catch(c){N(c.message||"Erreur lors de l'enregistrement")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),x]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(k,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:l,className:"p-4 sm:p-6 space-y-4",children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:j}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compte"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"font-medium text-gray-900",children:g==="USA"?"Caisse USA":"Caisse Burkina Faso"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",r,")"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant (",r,") *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:b,onChange:s=>u(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-base",placeholder:r==="USD"?"0.00":"0",required:!0,disabled:d})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:f,onChange:s=>i(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-base resize-none",rows:3,placeholder:"Décrivez cette entrée d'argent...",required:!0,disabled:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preuve (photo ou PDF) *"}),e.jsx("input",{ref:v,type:"file",accept:".jpg,.jpeg,.png,.pdf,image/jpeg,image/png,image/jpg,application/pdf",onChange:s=>{var c;return p(((c=s.target.files)==null?void 0:c[0])??null)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-base file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-emerald-50 file:text-emerald-700",required:!0,disabled:d}),m&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),m.name," (",(m.size/1024).toFixed(1)," Ko)"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,disabled:d,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enregistrement..."]}):o})]})]})]})})},K=({isOpen:n,onClose:t,accountName:g,currency:r,currentBalance:h,onSuccess:y,onSubmit:x})=>{const[o,b]=a.useState(""),[u,f]=a.useState(""),[i,m]=a.useState(!1),[p,d]=a.useState(null);if(!n)return null;const w=async j=>{if(j.preventDefault(),d(null),!o||parseFloat(o)<=0){d("Le montant doit être positif");return}if(!u.trim()){d("La description est requise");return}const N=parseFloat(o),v=h-N;if(!(v<0&&!confirm(`Attention: Cette dépense fera passer le solde à ${v.toLocaleString("fr-FR")} ${r}. Continuer ?`))){m(!0);try{await x(g,N,u.trim()),b(""),f(""),y(),t()}catch(l){d(l.message||"Erreur lors de l'enregistrement")}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-red-600"}),"Enregistrer une dépense"]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(k,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:w,className:"p-4 sm:p-6 space-y-4",children:[p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:p}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compte"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"font-medium text-gray-900",children:g==="USA"?"Caisse USA":"Caisse Burkina Faso"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",r,")"]})]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Solde actuel: ",r==="USD"?"$":"",h.toLocaleString("fr-FR",{minimumFractionDigits:r==="USD"?2:0,maximumFractionDigits:r==="USD"?2:0}),r==="XOF"?" FCFA":""]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant (",r,") *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:o,onChange:j=>b(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-base",placeholder:r==="USD"?"0.00":"0",required:!0,disabled:i})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:u,onChange:j=>f(j.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-base resize-none",rows:3,placeholder:"Décrivez cette dépense...",required:!0,disabled:i})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,disabled:i,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enregistrement..."]}):"Enregistrer la dépense"})]})]})]})})};function V({entryId:n}){const[t,g]=a.useState(!1),[r,h]=a.useState(null),y=async()=>{h(null),g(!0);try{const x=await S.getEntryProofBlob(n),o=URL.createObjectURL(x);window.open(o,"_blank","noopener,noreferrer"),setTimeout(()=>URL.revokeObjectURL(o),6e4)}catch(x){h(x instanceof Error?x.message:"Erreur")}finally{g(!1)}};return e.jsxs("div",{className:"flex flex-col items-start gap-0.5",children:[e.jsxs("button",{type:"button",onClick:y,disabled:t,className:"inline-flex items-center gap-1.5 px-2 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors disabled:opacity-50",children:[t?e.jsx(B,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(M,{className:"w-3.5 h-3.5"}),"Voir preuve"]}),r&&e.jsx("span",{className:"text-xs text-red-600",children:r})]})}const Z=()=>{const{user:n}=R(),[t,g]=a.useState(null),[r,h]=a.useState(!0),[y,x]=a.useState(null),[o,b]=a.useState(!1),[u,f]=a.useState({isOpen:!1,accountName:"USA"}),[i,m]=a.useState({isOpen:!1,accountName:"USA"}),p=async(s=!1)=>{s?b(!0):h(!0),x(null);try{const c=await S.getDashboard();g(c)}catch(c){x(c.message||"Erreur lors du chargement du dashboard caisse")}finally{h(!1),b(!1)}};a.useEffect(()=>{p()},[]);const d=s=>new Date(s).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),w=()=>{p(!0)},j=()=>{p(!0)};if(!n)return null;const N=n.country&&(n.country==="BFA"||n.country==="Burkina Faso"||String(n.country).toLowerCase().includes("burkina")),v=n.role==="sender_agent"||n.role==="payer_agent",l=N&&v;return r?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] gap-4",children:[e.jsx(B,{className:"w-10 h-10 text-emerald-600 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Chargement du dashboard caisse..."})]}):y||!t?e.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-red-700",children:y||"Erreur lors du chargement"}),e.jsx("button",{onClick:()=>p(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Réessayer"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Dashboard Caisse"}),e.jsx("p",{className:"text-gray-600 mt-1",children:l?"Vue Caisse Burkina Faso uniquement":"Suivi financier en temps réel - USA / Burkina Faso"})]}),e.jsxs("button",{onClick:()=>p(!0),disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:[e.jsx(O,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Actualiser"]})]}),!l&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-sm text-amber-900",children:[e.jsx("p",{className:"font-medium mb-2",children:"Règles métier"}),e.jsxs("ul",{className:"space-y-1 text-amber-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Tmount = montant de la Caisse USA."})," Quand il y a des mouvements dans la caisse (entrée, dépense, transfert), le Tmount change. USA → Burkina : client donne USD → caisse USA augmente ; paiement au BF → caisse Burkina diminue."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Burkina → USA :"})," Client donne XOF → caisse Burkina augmente ; paiement aux USA → caisse USA diminue."]})]})]}),e.jsxs("div",{className:`grid gap-6 ${l?"grid-cols-1 max-w-xl":"grid-cols-1 md:grid-cols-2"}`,children:[!l&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Tmount — Caisse USA"]}),e.jsx("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full text-sm font-medium",children:"USD"})]}),e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-900 mb-4",children:t.accounts.usa.formattedBalance}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Tmount = ce solde. À chaque mouvement (entrée, dépense, transfert), Tmount est mis à jour."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>f({isOpen:!0,accountName:"USA"}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm font-medium",children:[e.jsx(D,{className:"w-4 h-4"}),"Entrée"]}),e.jsxs("button",{onClick:()=>m({isOpen:!0,accountName:"USA"}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:[e.jsx(C,{className:"w-4 h-4"}),"Dépense"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl border-2 border-emerald-200 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-emerald-900 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Caisse Burkina Faso"]}),e.jsx("span",{className:"px-3 py-1 bg-emerald-200 text-emerald-800 rounded-full text-sm font-medium",children:"XOF"})]}),e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-emerald-900 mb-4",children:t.accounts.burkina.formattedBalance}),e.jsx("p",{className:"text-sm text-emerald-700 mb-4",children:"Solde actuel (augmente quand client donne XOF BF→USA, diminue quand on paie au BF pour USA→BF)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>f({isOpen:!0,accountName:"BURKINA"}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm font-medium",children:[e.jsx(D,{className:"w-4 h-4"}),"Entrée"]}),e.jsxs("button",{onClick:()=>m({isOpen:!0,accountName:"BURKINA"}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:[e.jsx(C,{className:"w-4 h-4"}),"Dépense"]})]})]})]}),!l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Tmount"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.accounts.usa.formattedBalance}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"= Solde Caisse USA (change à chaque mouvement)"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Tfees USD"})]}),e.jsxs("div",{className:"text-2xl font-bold text-amber-600",children:["$",t.totals.tfeesUSD.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Frais USA → Burkina"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(A,{className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Bénéfice Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:t.profit.formattedTotal}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Frais cumulés"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(P,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Partage Partenaire"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.profit.formattedPartnerShare}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"50% du bénéfice"})]})]}),!l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Tmount XOF"})]}),e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[t.totals.tmountXOF.toLocaleString("fr-FR")," FCFA"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"USA → Burkina : montants remis au BF"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Transferts USA → BF payés"})]}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:t.totals.totalPaidUsaToBf??t.totals.totalPaidTransfers}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nombre de transferts USA → Burkina complétés"})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Transferts Burkina → USA (hors Tmount)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Envoyés (XOF)"}),e.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[(t.totals.bfaToUsaAmountSentXOF??0).toLocaleString("fr-FR")," FCFA"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Remis (USD)"}),e.jsxs("p",{className:"text-lg font-bold text-slate-900",children:["$",(t.totals.bfaToUsaAmountReceivedUSD??0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Nombre payés"}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:t.totals.totalPaidBfToUsa??0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),l?"Historique récent (Caisse Burkina)":"Historique récent (Journal comptable)"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),!l&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Compte"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transfert"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Preuve"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(l?t.recentEntries.filter(s=>s.accountName==="BURKINA"):t.recentEntries).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:l?6:7,className:"px-4 py-8 text-center text-gray-500",children:"Aucune écriture récente"})}):(l?t.recentEntries.filter(s=>s.accountName==="BURKINA"):t.recentEntries).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d(s.createdAt)}),!l&&e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.accountName==="USA"?"bg-blue-100 text-blue-800":"bg-emerald-100 text-emerald-800"}`,children:s.accountName})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="CREDIT"?e.jsx(X,{className:"w-4 h-4 text-emerald-600"}):e.jsx($,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:`text-sm font-medium ${s.type==="CREDIT"?"text-emerald-600":"text-red-600"}`,children:s.type==="CREDIT"?"CRÉDIT":"DÉBIT"})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:[s.currency==="USD"?"$":"",s.amount.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}),s.currency==="XOF"?" FCFA":""]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:s.description}),e.jsx("td",{className:"px-4 py-3",children:s.transferReference?e.jsx("span",{className:"text-xs font-mono text-blue-600",children:s.transferReference}):e.jsx("span",{className:"text-xs text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3",children:s.proofFilePath?e.jsx(V,{entryId:s.id}):e.jsx("span",{className:"text-xs text-gray-400",children:"—"})})]},s.id))})]})})]}),e.jsx(z,{isOpen:u.isOpen,onClose:()=>f({isOpen:!1,accountName:"USA"}),accountName:u.accountName,currency:u.accountName==="USA"?"USD":"XOF",onSuccess:w,onSubmit:async(s,c,U,E)=>{await S.addEntry(s,c,U,E)},title:`Ajouter une entrée d'argent - ${u.accountName==="USA"?"Caisse USA":"Caisse Burkina Faso"}`,buttonLabel:"Enregistrer l'entrée"}),e.jsx(K,{isOpen:i.isOpen,onClose:()=>m({isOpen:!1,accountName:"USA"}),accountName:i.accountName,currency:i.accountName==="USA"?"USD":"XOF",currentBalance:i.accountName==="USA"?t.accounts.usa.balance:t.accounts.burkina.balance,onSuccess:j,onSubmit:async(s,c,U)=>{await S.addExpense(s,c,U)}})]})};export{Z as CashDashboard};
