import{r as m,j as e}from"./react-PleRxLNr.js";import{D as v}from"./DataTable-CWvM5oaM.js";import{j as k,X as U,a3 as E,v as _,k as M,F as T,t as L,o as P,g as q,U as R,u as V,q as O}from"./lucide-DAQsc5bm.js";const I=({onSubmit:u,onCancel:p})=>{const[t,a]=m.useState({reference:"",date:new Date().toISOString().split("T")[0],accountCode:"",accountLabel:"",debit:0,credit:0,description:"",journal:""}),o=c=>{const{name:l,value:x}=c.target;a(i=>({...i,[l]:l.includes("debit")||l.includes("credit")?Number(x):x}))},n=c=>{c.preventDefault(),u(t)};return e.jsxs("form",{onSubmit:n,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Référence"}),e.jsx("input",{type:"text",name:"reference",value:t.reference,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",name:"date",value:t.date,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code compte"}),e.jsx("input",{type:"text",name:"accountCode",value:t.accountCode,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Libellé compte"}),e.jsx("input",{type:"text",name:"accountLabel",value:t.accountLabel,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Débit"}),e.jsx("input",{type:"number",name:"debit",value:t.debit,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crédit"}),e.jsx("input",{type:"number",name:"credit",value:t.credit,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description,onChange:o,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Journal"}),e.jsx("input",{type:"text",name:"journal",value:t.journal,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsxs("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"})," Annuler"]}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[e.jsx(E,{className:"w-4 h-4 mr-1"})," Enregistrer"]})]})]})},H=({entries:u,onAddEntry:p})=>{const[t,a]=m.useState(!1),o=c=>{p(c),a(!1)},n=[{header:"Référence",accessor:"reference"},{header:"Date",accessor:"date"},{header:"Code compte",accessor:"accountCode"},{header:"Libellé compte",accessor:"accountLabel"},{header:"Débit",accessor:"debit",render:c=>c.toLocaleString("fr-FR")+" FCFA"},{header:"Crédit",accessor:"credit",render:c=>c.toLocaleString("fr-FR")+" FCFA"},{header:"Journal",accessor:"journal"},{header:"Statut",accessor:"status"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Saisie des écritures comptables"}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(k,{className:"w-4 h-4 mr-1"})," Nouvelle écriture"]})]}),t&&e.jsx(I,{onSubmit:o,onCancel:()=>a(!1)}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx(v,{data:u,columns:n})})]})},$=({entries:u,onSubmit:p,onCancel:t})=>{const[a,o]=m.useState([]),[n,c]=m.useState(new Date().toISOString().split("T")[0]),[l,x]=m.useState(""),i=d=>{o(f=>f.includes(d)?f.filter(j=>j!==d):[...f,d])},b=d=>{if(d.preventDefault(),a.length<2){alert("Veuillez sélectionner au moins 2 écritures à lettrer");return}const f=u.filter(j=>a.includes(j.id)).reduce((j,N)=>j+Math.abs(N.debit-N.credit),0);p({entryIds:a,letteringDate:n,letteringReference:l,totalAmount:f,status:"pending"})},h=u.filter(d=>!d.status||d.status!=="reversed");return e.jsxs("form",{onSubmit:b,className:"bg-white p-6 rounded-lg shadow-md space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de lettrage"}),e.jsx("input",{type:"date",value:n,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Référence de lettrage"}),e.jsx("input",{type:"text",value:l,onChange:d=>x(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Sélectionnez les écritures à lettrer"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compte"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Débit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crédit"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:a.includes(d.id),onChange:()=>i(d.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.reference}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.date}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[d.accountCode," - ",d.accountLabel]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[d.debit.toLocaleString("fr-FR")," FCFA"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[d.credit.toLocaleString("fr-FR")," FCFA"]})]},d.id))})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsxs("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-1"})," Annuler"]}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",disabled:a.length<2,children:[e.jsx(E,{className:"w-4 h-4 mr-1"})," Lettrer les écritures"]})]})]})},X=({letterings:u,entries:p,onCreateLettering:t})=>{const[a,o]=m.useState(!1),n=l=>{t(l),o(!1)},c=[{header:"Référence",accessor:"letteringReference"},{header:"Date",accessor:"letteringDate"},{header:"Montant total",accessor:"totalAmount",render:l=>l.toLocaleString("fr-FR")+" FCFA"},{header:"Statut",accessor:"status"},{header:"Écritures associées",accessor:"entryIds",render:l=>l.length}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Lettrage des écritures"}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(k,{className:"w-4 h-4 mr-1"})," Nouveau lettrage"]})]}),a&&e.jsx($,{entries:p,onSubmit:n,onCancel:()=>o(!1)}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx(v,{data:u,columns:c})})]})},J=({onSubmit:u,onCancel:p,budget:t})=>{const[a,o]=m.useState({label:(t==null?void 0:t.label)||"",year:(t==null?void 0:t.year)||new Date().getFullYear(),amount:(t==null?void 0:t.amount)||0,department:(t==null?void 0:t.department)||"",category:(t==null?void 0:t.category)||""}),n=l=>{const{name:x,value:i}=l.target;o(b=>({...b,[x]:x==="year"||x==="amount"?Number(i):i}))},c=l=>{l.preventDefault(),u(a)};return e.jsxs("form",{onSubmit:c,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Libellé"}),e.jsx("input",{type:"text",name:"label",value:a.label,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Année"}),e.jsx("input",{type:"number",name:"year",value:a.year,onChange:n,min:"2000",max:"2100",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant budgété"}),e.jsx("input",{type:"number",name:"amount",value:a.amount,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Département"}),e.jsx("input",{type:"text",name:"department",value:a.department,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catégorie"}),e.jsx("input",{type:"text",name:"category",value:a.category,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t?"Modifier":"Créer"})]})]})},z=({variances:u})=>{const p=[{header:"Budget",accessor:"budgetId"},{header:"Montant prévu",accessor:"plannedAmount",render:t=>t.toLocaleString("fr-FR")+" FCFA"},{header:"Montant réel",accessor:"actualAmount",render:t=>t.toLocaleString("fr-FR")+" FCFA"},{header:"Écart",accessor:"varianceAmount",render:t=>e.jsxs("span",{className:t>=0?"text-green-600":"text-red-600",children:[t>=0?"+":"",t.toLocaleString("fr-FR")," FCFA"]})},{header:"% Écart",accessor:"variancePercentage",render:t=>e.jsxs("span",{className:t>=0?"text-green-600":"text-red-600",children:[t>=0?"+":"",t.toFixed(2),"%"]})},{header:"Période",accessor:"period"},{header:"Explication",accessor:"explanation"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Analyse des écarts budgétaires"})}),e.jsx(v,{data:u,columns:p})]})},G=({budgets:u,variances:p,onAddBudget:t,onUpdateBudget:a})=>{const[o,n]=m.useState(!1),[c,l]=m.useState(null),x=h=>{c?a(c.id,h):t(h),n(!1),l(null)},i=h=>{l(h),n(!0)},b=[{header:"Libellé",accessor:"label"},{header:"Année",accessor:"year"},{header:"Montant budgété",accessor:"amount",render:h=>h.toLocaleString("fr-FR")+" FCFA"},{header:"Consommé",accessor:"consumed",render:h=>h.toLocaleString("fr-FR")+" FCFA"},{header:"Restant",accessor:"remaining",render:h=>h.toLocaleString("fr-FR")+" FCFA"},{header:"Statut",accessor:"status"},{header:"Actions",accessor:h=>e.jsxs("button",{onClick:()=>i(h),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[e.jsx(M,{className:"w-4 h-4 mr-1"})," Modifier"]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gestion des budgets"}),e.jsxs("button",{onClick:()=>{l(null),n(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(k,{className:"w-4 h-4 mr-1"})," Nouveau budget"]})]}),o&&e.jsx(J,{onSubmit:x,onCancel:()=>{n(!1),l(null)},budget:c||void 0}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx(v,{data:u,columns:b})}),e.jsx(z,{variances:p})]})},W=({onSubmit:u,onCancel:p,pkg:t})=>{const[a,o]=m.useState({year:(t==null?void 0:t.year)||new Date().getFullYear(),period:(t==null?void 0:t.period)||"annual",status:(t==null?void 0:t.status)||"draft"}),n=l=>{const{name:x,value:i}=l.target;o(b=>({...b,[x]:x==="year"?Number(i):i}))},c=l=>{l.preventDefault(),u(a)};return e.jsxs("form",{onSubmit:c,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Année"}),e.jsx("input",{type:"number",name:"year",value:a.year,onChange:n,min:"2000",max:"2100",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Période"}),e.jsxs("select",{name:"period",value:a.period,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"annual",children:"Annuel"}),e.jsx("option",{value:"first_quarter",children:"Premier trimestre"}),e.jsx("option",{value:"second_quarter",children:"Deuxième trimestre"}),e.jsx("option",{value:"third_quarter",children:"Troisième trimestre"}),e.jsx("option",{value:"fourth_quarter",children:"Quatrième trimestre"}),e.jsx("option",{value:"first_semester",children:"Premier semestre"}),e.jsx("option",{value:"second_semester",children:"Second semestre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),e.jsxs("select",{name:"status",value:a.status,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"draft",children:"Brouillon"}),e.jsx("option",{value:"submitted",children:"Soumis"}),e.jsx("option",{value:"validated",children:"Validé"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t?"Modifier":"Créer"})]})]})},Q=({onUpload:u,onCancel:p,pkgId:t})=>{const[a,o]=m.useState({type:"",fileName:"",filePath:""}),n=l=>{const{name:x,value:i}=l.target;o(b=>({...b,[x]:i}))},c=l=>{l.preventDefault(),u(a)};return e.jsxs("form",{onSubmit:c,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de document"}),e.jsxs("select",{name:"type",value:a.type,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Sélectionner un type"}),e.jsx("option",{value:"balance_sheet",children:"Bilan"}),e.jsx("option",{value:"income_statement",children:"Compte de résultat"}),e.jsx("option",{value:"cash_flow",children:"État de flux de trésorerie"}),e.jsx("option",{value:"tax_return",children:"Déclaration fiscale"}),e.jsx("option",{value:"audit_report",children:"Rapport d'audit"}),e.jsx("option",{value:"compliance_certificate",children:"Certificat de conformité"}),e.jsx("option",{value:"other",children:"Autre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du fichier"}),e.jsx("input",{type:"text",name:"fileName",value:a.fileName,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chemin d'accès"}),e.jsx("input",{type:"text",name:"filePath",value:a.filePath,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1"})," Télécharger"]})]})]})},Y=({packages:u,documents:p,onAddPackage:t,onUpdatePackage:a,onAddDocument:o})=>{var g;const[n,c]=m.useState(!1),[l,x]=m.useState(!1),[i,b]=m.useState(null),[h,d]=m.useState(null),f=r=>{h?a(h.id,r):t(r),c(!1),d(null)},j=r=>{i&&(o(r),x(!1),b(null))},N=r=>{d(r),c(!0)},C=r=>{switch(r){case"draft":return"text-yellow-600 bg-yellow-100";case"submitted":return"text-blue-600 bg-blue-100";case"validated":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},A=[{header:"Année",accessor:"year"},{header:"Période",accessor:"period"},{header:"Statut",accessor:"status",render:r=>e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(r)}`,children:[r==="draft"&&"Brouillon",r==="submitted"&&"Soumis",r==="validated"&&"Validé"]})},{header:"Documents",accessor:"documents",render:r=>r.length},{header:"Actions",accessor:r=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{b(r.id),x(!0)},className:"text-blue-600 hover:text-blue-900 flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1"})," Doc"]}),e.jsxs("button",{onClick:()=>N(r),className:"text-green-600 hover:text-green-900 flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-1"})," Modifier"]})]})}],S=[{header:"Type",accessor:"type"},{header:"Nom du fichier",accessor:"fileName"},{header:"Téléchargé le",accessor:"uploadedAt",render:r=>new Date(r).toLocaleDateString()},{header:"Actions",accessor:r=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-900 flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-1"})," Télécharger"]}),e.jsxs("button",{className:"text-green-600 hover:text-green-900 flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-1"})," Voir"]})]})}],D=i?p.filter(r=>r.id.startsWith(i)):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gestion des liasses fiscales"}),e.jsxs("button",{onClick:()=>{d(null),c(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(k,{className:"w-4 h-4 mr-1"})," Nouvelle liasse"]})]}),n&&e.jsx(W,{onSubmit:f,onCancel:()=>{c(!1),d(null)},pkg:h||void 0}),l&&i&&e.jsx(Q,{onUpload:j,onCancel:()=>{x(!1),b(null)},pkgId:i}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx(v,{data:u,columns:A})}),i&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsxs("h3",{className:"text-lg font-medium text-gray-800",children:["Documents de la liasse: ",(g=u.find(r=>r.id===i))==null?void 0:g.year]})]}),e.jsx(v,{data:D,columns:S})]})]})},K=({trails:u,reports:p,onExport:t})=>{const[a,o]=m.useState([]),[n,c]=m.useState([]),[l,x]=m.useState(""),[i,b]=m.useState(""),[h,d]=m.useState(""),[f,j]=m.useState("trails"),N=s=>{o(w=>w.includes(s)?w.filter(F=>F!==s):[...w,s])},C=s=>{c(w=>w.includes(s)?w.filter(F=>F!==s):[...w,s])},A=()=>{a.length===g.length?o([]):o(g.map(s=>s.id))},S=()=>{n.length===r.length?c([]):c(r.map(s=>s.id))},D=()=>{f==="reports"&&t(n)},g=u.filter(s=>(l?s.module.toLowerCase().includes(l.toLowerCase()):!0)&&(i?s.user.toLowerCase().includes(i.toLowerCase()):!0)&&(h?s.date.startsWith(h):!0)),r=p.filter(s=>(l?s.reportType.toLowerCase().includes(l.toLowerCase()):!0)&&(i?s.author.toLowerCase().includes(i.toLowerCase()):!0)&&(h?s.date.startsWith(h):!0)),y=[{header:e.jsx("input",{type:"checkbox",checked:a.length===g.length&&g.length>0,onChange:A,className:"rounded text-blue-600 focus:ring-blue-500"}),accessor:s=>e.jsx("input",{type:"checkbox",checked:a.includes(s.id),onChange:()=>N(s.id),className:"rounded text-blue-600 focus:ring-blue-500"})},{header:"Date",accessor:"date",render:s=>new Date(s).toLocaleString()},{header:"Utilisateur",accessor:"user",render:s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-4 h-4 mr-2 text-gray-500"}),s]})},{header:"Action",accessor:"action"},{header:"Module",accessor:"module"},{header:"Détails",accessor:"details",render:s=>e.jsx("div",{className:"max-w-xs truncate",title:s,children:s})}],B=[{header:e.jsx("input",{type:"checkbox",checked:n.length===r.length&&r.length>0,onChange:S,className:"rounded text-blue-600 focus:ring-blue-500"}),accessor:s=>e.jsx("input",{type:"checkbox",checked:n.includes(s.id),onChange:()=>C(s.id),className:"rounded text-blue-600 focus:ring-blue-500"})},{header:"Date",accessor:"date",render:s=>new Date(s).toLocaleDateString()},{header:"Titre",accessor:"title"},{header:"Type",accessor:"reportType"},{header:"Auteur",accessor:"author"},{header:"Conformité OHADA",accessor:"ohadaCompliant",render:s=>e.jsx("span",{className:s?"text-green-600":"text-red-600",children:s?"Conforme":"Non conforme"})},{header:"Statut",accessor:"status",render:s=>e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${s==="pending"?"bg-yellow-100 text-yellow-800":s==="reviewed"?"bg-blue-100 text-blue-800":s==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[s==="pending"&&"En attente",s==="reviewed"&&"Revu",s==="approved"&&"Approuvé",s==="rejected"&&"Rejeté"]})},{header:"Actions",accessor:s=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-900 flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-1"})," Voir"]}),e.jsxs("button",{className:"text-green-600 hover:text-green-900 flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-1"})," Télécharger"]})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Audit Trail & Conformité OHADA"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j("trails"),className:`px-4 py-2 rounded-md ${f==="trails"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Journal d'audit"}),e.jsx("button",{onClick:()=>j("reports"),className:`px-4 py-2 rounded-md ${f==="reports"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Rapports de conformité"})]}),e.jsxs("button",{onClick:D,disabled:n.length===0,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(L,{className:"w-4 h-4 mr-1"})," Exporter sélection"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Filtrer par module...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:s=>x(s.target.value)}),e.jsx(V,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Filtrer par utilisateur...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:i,onChange:s=>b(s.target.value)}),e.jsx(R,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:s=>d(s.target.value)}),e.jsx(O,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:f==="trails"?e.jsx(v,{data:g,columns:y}):e.jsx(v,{data:r,columns:B})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600 mr-2"}),"Informations sur la conformité OHADA"]}),e.jsxs("div",{className:"prose max-w-none text-gray-600",children:[e.jsx("p",{children:"Le système assure le suivi de la conformité aux normes OHADA (Organisation pour l'Harmonisation en Afrique du Droit des Affaires) pour garantir que les pratiques comptables et juridiques respectent les standards régionaux."}),e.jsx("p",{className:"mt-2",children:"Les rapports de conformité sont générés périodiquement pour valider que les processus internes respectent les exigences OHADA en matière de tenue de la comptabilité, de certification des états financiers et de reporting réglementaire."})]})]})]})},Z=[{id:"AE-001",reference:"ENT-2024-001",date:"2024-01-15",accountCode:"411",accountLabel:"Clients",debit:15e5,credit:0,description:"Vente de marchandises à crédit",journal:"Ventes",status:"posted",createdBy:"comptable1",createdAt:"2024-01-15T09:30:00"},{id:"AE-002",reference:"ENT-2024-002",date:"2024-01-16",accountCode:"512",accountLabel:"Banque",debit:0,credit:15e5,description:"Encaissement client",journal:"Banque",status:"posted",createdBy:"comptable1",createdAt:"2024-01-16T10:15:00"}],ee=[{id:"LET-001",entryIds:["AE-001","AE-002"],letteringDate:"2024-01-16",letteringReference:"LTR-2024-001",totalAmount:15e5,status:"completed",createdBy:"comptable1",createdAt:"2024-01-16T11:00:00"}],te=[{id:"BUD-001",label:"Marketing",year:2024,amount:1e7,allocated:8e6,consumed:65e5,remaining:15e5,status:"approved",department:"Commercial",category:"Communication"},{id:"BUD-002",label:"RH",year:2024,amount:15e6,allocated:12e6,consumed:11e6,remaining:1e6,status:"approved",department:"Ressources Humaines",category:"Salaires"}],se=[{id:"VAR-001",budgetId:"BUD-001",varianceAmount:-5e5,variancePercentage:-7.69,actualAmount:7e6,plannedAmount:65e5,period:"Janvier 2024",explanation:"Dépenses imprévues pour campagne marketing"},{id:"VAR-002",budgetId:"BUD-002",varianceAmount:2e5,variancePercentage:1.82,actualAmount:112e5,plannedAmount:11e6,period:"Janvier 2024",explanation:"Heures supplémentaires"}],re=[{id:"TXP-001",year:2023,period:"annual",status:"submitted",submissionDate:"2024-01-15",validationDate:"2024-01-20",documents:[]},{id:"TXP-002",year:2024,period:"first_quarter",status:"draft",documents:[]}],ae=[{id:"TXD-001",type:"balance_sheet",fileName:"bilan_2023.pdf",filePath:"/documents/tax/bilan_2023.pdf",uploadedAt:"2024-01-15T10:30:00",uploadedBy:"comptable1"},{id:"TXD-002",type:"income_statement",fileName:"compte_resultat_2023.pdf",filePath:"/documents/tax/compte_resultat_2023.pdf",uploadedAt:"2024-01-15T11:00:00",uploadedBy:"comptable1"}],ne=[{id:"AUD-001",date:"2024-01-15T09:30:00",user:"comptable1",action:"Création écriture",module:"Comptabilité",details:"Création de l'écriture ENT-2024-001",ipAddress:"192.168.1.10",userAgent:"Mozilla/5.0..."},{id:"AUD-002",date:"2024-01-15T10:15:00",user:"comptable2",action:"Validation écriture",module:"Comptabilité",details:"Validation de l'écriture ENT-2024-001",ipAddress:"192.168.1.11",userAgent:"Mozilla/5.0..."}],le=[{id:"CR-001",title:"Rapport de conformité OHADA Q4 2023",date:"2024-01-10",status:"approved",author:"auditeur1",ohadaCompliant:!0,reportType:"quarterly",filePath:"/documents/reports/ohada_q4_2023.pdf"},{id:"CR-002",title:"Analyse des écarts budgétaires 2023",date:"2024-01-12",status:"reviewed",author:"controleur1",ohadaCompliant:!0,reportType:"annual",filePath:"/documents/reports/ecarts_budget_2023.pdf"}],ie=()=>{const[u,p]=m.useState(Z),[t,a]=m.useState(ee),[o,n]=m.useState(te),[c,l]=m.useState(se),[x,i]=m.useState(re),[b,h]=m.useState(ae),d=g=>{const r={...g,id:`AE-${u.length+1}`,status:"draft",createdBy:"currentUser",createdAt:new Date().toISOString()};p([...u,r])},f=g=>{const r={...g,id:`LET-${t.length+1}`,createdBy:"currentUser",createdAt:new Date().toISOString()};a([...t,r])},j=g=>{const r={...g,id:`BUD-${o.length+1}`,allocated:0,consumed:0,remaining:g.amount,status:"draft"};n([...o,r])},N=(g,r)=>{n(o.map(y=>y.id===g?{...y,...r}:y))},C=g=>{const r={...g,id:`TXP-${x.length+1}`,documents:[]};i([...x,r])},A=(g,r)=>{i(x.map(y=>y.id===g?{...y,...r}:y))},S=g=>{const r={...g,id:`${g.type}-${b.length+1}`,uploadedAt:new Date().toISOString(),uploadedBy:"currentUser"};h([...b,r])},D=g=>{console.log("Exporting reports:",g)};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-2xl p-8 shadow-xl",children:e.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Comptabilité"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Gestion des écritures, budgets et conformité OHADA"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(H,{entries:u,onAddEntry:d})}),e.jsx("div",{children:e.jsx(X,{letterings:t,entries:u,onCreateLettering:f})}),e.jsx("div",{children:e.jsx(G,{budgets:o,variances:c,onAddBudget:j,onUpdateBudget:N})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Y,{packages:x,documents:b,onAddPackage:C,onUpdatePackage:A,onAddDocument:S})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(K,{trails:ne,reports:le,onExport:D})})]})]})};export{ie as AccountingDashboard};
